# 🛠️ Dev Log – 2025.01.29

## 📌 작업 요약
- FastAPI 기반 개인 프로젝트를 Docker로 컨테이너화하고 Railway에 최초 배포 완료
- 외부 도메인에서 `/healthz` 헬스체크까지 검증

---

## 🧩 작업 내용

### 1. FastAPI 최소 실행 구조 구성
- FastAPI 엔트리포인트(`main.py`)와 `/health` API를 포함한 최소 구조를 구성
- 실행 우선(MVP) 전략으로 불필요한 초기 구조 설계를 배제

### 2. Dockerfile 작성 및 컨테이너화
- Python 3.11 slim 이미지를 기반으로 Dockerfile 작성
- Railway 환경을 고려해 `PORT` 환경변수를 사용하는 uvicorn 실행 방식 적용

### 3. Docker 로컬 빌드 및 실행 검증
- Docker 이미지 빌드 성공 확인
- 컨테이너 환경에서도 FastAPI 서버가 정상적으로 기동되는 것을 검증

### 4. 컨테이너 실행 경로 이슈 해결
- `ModuleNotFoundError: app` 오류 발생
- 컨테이너 내 실행 경로(`/app/backend`) 기준으로 uvicorn 실행하도록 수정하여 해결

### 5. Health Check 엔드포인트 확장
- 인프라 헬스체크용 `/healthz` 엔드포인트 추가
- 로컬 및 Docker 환경에서 정상 응답 확인

### 6. Railway 배포 환경 설정
- Railway 빌드 실패(Railpack/Nixpacks) 이슈 대응
- Dockerfile을 루트 디렉토리에 배치하여 Docker 기반 빌드를 강제

### 7. Railway 최초 배포 성공
- GitHub 연동을 통해 Railway 배포 성공
- Public Domain을 노출하여 외부 접근 가능한 서비스 상태 확보

### 8. 외부 헬스체크 검증
- Railway에서 생성된 도메인으로 `/healthz` 엔드포인트 접근
- 외부 네트워크 환경에서도 정상 응답 확인

---

## ⚠️ 이슈 & 해결
- **이슈**: Railway 배포 시 `Error creating build plan with Railpack` 발생  
  - **원인**: Dockerfile 경로를 인식하지 못해 Nixpacks 빌드를 시도  
  - **해결**: Dockerfile을 레포지토리 루트에 배치하여 Docker build로 강제 전환

- **이슈**: Docker 컨테이너 실행 시 `ModuleNotFoundError: app` 발생  
  - **원인**: 컨테이너 내부 실행 경로와 uvicorn import 경로 불일치  
  - **해결**: `/app/backend` 기준으로 uvicorn 실행하도록 CMD 수정

---

## ✅ 현재 상태
- 로컬 실행 여부: OK  
- Docker 상태: OK  
- Railway 배포 상태: OK  
- 외부 접근(URL): OK (`/healthz` 정상 응답)

---

## 🔜 다음 작업 (Next Step)
- [ ] PostgreSQL 연동 및 DB 세션 구성
- [ ] Blog API 엔드포인트 설계
- [ ] React 프론트엔드 빌드 및 static 서빙 연결
- [ ] LLM Playground API 초안 구성

---

## 🏷️ Tags
`#FastAPI` `#Docker` `#Railway` `#DevLog` `#PersonalProject` `#FirstDeploy`

## 📂 Category
- Development Log