# 🛠️ Dev Log – 2026.01.02

## 📌 작업 요약
- Admin 인증 구조 단순화 및 재설계
- 글 수정(Edit) 기능 구현 및 안정화
- 운영 환경 배포 전 로컬 검증 완료

---

## 🧩 작업 내용

### 1. Admin 인증 구조 재설계
- JWT 기반 인증을 제거하고, 서버 env에 저장된 admin 계정 정보로 로그인하도록 구조 변경
- 로그인 성공 시 HttpOnly 쿠키(admin_session)를 발급하여 세션 관리
- 개인 프로젝트 규모에 맞게 인증 복잡도를 낮추고 유지보수성을 확보

### 2. Admin Editor 접근 가드 및 UI 정리
- 비로그인 상태에서 `/__admin__/editor` 접근 시 `/admin/login`으로 리다이렉트 처리
- AdminEditor 화면 내 인증 관련 UI 블록 제거
- 서버 기준(`/auth/admin/me`)으로 admin 여부를 판단하도록 통일

### 3. 글 수정(Edit) 기능 구현
- AdminEditor에서 기존 글을 불러와 수정 가능하도록 구현
- 수정 시 `created_at`은 유지, `updated_at`만 갱신되도록 처리
- 수정 완료 후 상세 페이지로 이동하여 변경 사항 즉시 확인 가능

### 4. Edit 버튼 권한 제어
- 글 상세 페이지에서 admin 로그인 상태일 때만 Edit 버튼 노출
- 프론트 상태가 아닌 서버 세션 기준으로 권한 판단

---

## ⚠️ 이슈 & 해결
- **이슈**: 글 수정(PATCH) 요청 시 500 Internal Server Error 발생
  - **원인**: `model_dump()` 호출 시 `exclude_none` 옵션 오타 (`exlcude_none`)
  - **해결**: 오타 수정 후 정상적으로 UPDATE 동작 확인

---

## ✅ 현재 상태
- 로컬 실행 여부: OK
- Docker 상태: OK
- 배포 상태: OK
- 외부 접근(URL): OK

---

## 🔜 다음 작업 (Next Step)
- [ ] 운영 환경에서 Admin 로그인 및 글 수정 재확인
- [ ] Admin 로그아웃 버튼 UI 추가
- [ ] Admin route guard 컴포넌트 구조 개선 검토

---

## 🏷️ Tags
`#FastAPI` `#React` `#AdminAuth` `#CookieSession` `#DevLog` `#PersonalProject`

## 📂 Category
- Development Log
