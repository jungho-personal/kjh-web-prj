# 🛠️ Dev Log – 2026.01.02

## 📌 작업 요약
- Admin Editor 배포 후 화이트 스크린 및 401 인증 이슈 해결
- Railway 배포 환경에 맞춰 Admin 인증 방식을 확장하여 운영 환경에서 글 등록 성공

---

## 🧩 작업 내용

### 1. Admin Editor 라우팅 및 배포 상태 점검
- `/__admin__/editor` 경로를 통해 Admin Editor 접근 시 화이트 스크린 발생
- 원인이 라우팅 구조가 아닌 **배포 번들이 최신 커밋을 반영하지 않은 상태**임을 확인
- 배포된 `index-*.js` 파일에서 문자열 검색을 통해 실제 반영 여부를 확인하고 커밋/배포 재정리

### 2. Admin 글 저장 401 Unauthorized 원인 분석
- 브라우저 Network 탭에서 `Authorization: Basic ...` 헤더가 정상적으로 전송되는 것을 확인
- 서버 응답이 `{"detail":"Missing Authorization header"}`로 반환되어 프론트 문제가 아님을 확정
- Railway 배포 환경에서 Authorization 헤더가 정상 전달되더라도,
  백엔드 인증 로직에서 이를 인식하지 못하는 구조임을 확인

### 3. require_admin 인증 로직 확장
- 기존 `require_admin`이 JWT(Bearer) 인증만 허용하도록 구현되어 있어
  Admin Editor의 Basic Auth 요청이 모두 차단되고 있었음
- Admin 전용 인증 수단으로 `X-Admin-Token` 헤더(base64(user:password))를 추가
- JWT 기반 Admin 인증은 유지하면서,
  Admin Editor에서는 `X-Admin-Token` 방식으로 인증 가능하도록 확장
- Railway 배포 환경에서도 Admin 글 등록 정상 동작 확인

---

## ⚠️ 이슈 & 해결
- **이슈**: 배포 후 Admin Editor 접근 시 화이트 스크린 발생 및 글 저장 시 401 Unauthorized
  - **원인**:
    - 배포된 번들이 최신 커밋을 반영하지 않은 상태
    - 백엔드 `require_admin`이 Bearer(JWT) 방식만 허용하여 Basic Authorization이 무시됨
  - **해결**:
    - 배포 번들(`index-*.js`) 직접 확인으로 배포 미반영 문제를 빠르게 확정하고 재배포
    - `require_admin`에 `X-Admin-Token` 인증을 추가하여 Admin Editor 요청 허용

---

## ✅ 현재 상태
- 로컬 실행 여부: OK
- Docker 상태: OK
- 배포 상태: OK
- 외부 접근(URL): OK (`/__admin__/editor` 접근 및 글 등록 성공)

---

## 🔜 다음 작업 (Next Step)
- [ ] Admin Editor UX 개선 (저장 성공 toast, 에러 메시지 개선)
- [ ] 단축키 지원 (Ctrl + S 저장)
- [ ] Dev Log 자동 규칙 고도화 (제목 / slug / summary 자동 생성 강화)
- [ ] Admin Editor 수정 모드(PATCH) 및 글 목록 관리 기능 추가

---

## 🏷️ Tags
`#FastAPI` `#React` `#Tailwind` `#shadcn` `#Railway` `#Auth` `#DevLog`

## 📂 Category
- Development Log